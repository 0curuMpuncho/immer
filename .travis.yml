language: c++
sudo: false

addons:
  apt:
    packages: g++-6
    sources: ubuntu-toolchain-r-test

matrix:
  include:
    - env: >
        LLVM=3.9.0
        COMPILER=clang++
        CONFIGURATION=Debug SLOW=true
        FLAGS="-fsanitize=address -fsanitize=leak"

    - env: >
        LLVM=3.9.0
        COMPILER=clang++
        CONFIGURATION=Release SLOW=false
        BENCHMARK=true

    - env: >
        COMPILER=g++-6
        CONFIGURATION=Debug SLOW=true
        COVERAGE=true

    - env: >
        COMPILER=g++-6
        CONFIGURATION=Release SLOW=false
        BENCHMARK=true DOCS=true

cache:
  - pip
  - ccache
  - directories:
      - ${TRAVIS_BUILD_DIR}/build/deps
      - ${TRAVIS_BUILD_DIR}/deps

before_install: source tools/travis/all.bash && travis-before-install
install:        travis-install
before_script:  travis-before-script
script:         travis-script
after_success:  travis-after-success
